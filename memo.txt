




2014/05/16 15:05

// 数値、数字 計算
// 配列
// 連想配列
// 配列の検索
// 条件分岐
// case分岐
// 繰り返し
// 無限繰り返し
// foreach
// クラス
// 無名関数
// ラムダ
// クロージャ
// jsonの取扱
// restの取扱




2014/05/16 15:05

指定文字列の文字数が８の倍数桁ではない場合に
文字列を加算して、８の倍数桁に整える関数

targetTrim.length % 8 != 0

で８で割り切れるかどうかを調べています。
むしろあまりを算出しております。
→加算すればいい文字数

それなのに。
  val d = targetTrim.length.toDouble / 8
  val b = Math.ceil(d)
  val hashLength = (b).toInt * 8

どうしてここで、回りくどい計算をして
対象文字列の次の８の倍数桁を算出しているんですか？

targetTrim.length % 8 != 0
で出た値を

  val appendStringTrim = appendString.substring(0, hashLength - target.length)

hashLength - target.length
に当てはめちゃだめなんでしょうか？



2014/05/09 10:30
例えば

[PAGE_IMAGE_TAG_2] aaa [PAGE_IMAGE_TAG_3]

こんな一行があったとします。

parsedTextにこれが入っていたとしたら

 aaa 
が出て来てほしいじゃないですか。

しかし。。。

プログラムでも、
テキストエディタの検索でも

その一行がまるまるひっかかってしまい、
実行結果は

[PAGE_IMAGE_TAG_2] aaa [PAGE_IMAGE_TAG_3]".replaceAll(removeAnchorRegex, "")
res6: String = ""

となりました。。。

実際に先方が作ったテキストは以下なんですが

---------------------------先方が作ったサンプルテキスト-------------------

[PAGE_IMAGE_TAG_2]

<p style="font-weight:bold; border:solid 1px #000; padding:5px;">episode 06</p>

[H2]<span style="border-left:solid 10px #c3d700; padding-left:10px;">地産地消を積極的にＰＲ[/H2]
あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

<div style="display:block; margin:0 auto;text-align:center;">[PAGE_IMAGE_TAG_3]</div>
<p style="font-size:small;font-weight:bold;color:#80bf05;margin:0 auto;text-align:center;">[PAGE_IMAGE_CAPTION_3]</p>

あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

<div style="display:block; margin:0 auto;text-align:center;">[PAGE_IMAGE_TAG_4]</div>
<p style="font-size:small;font-weight:bold;color:#80bf05;margin:0 auto;text-align:center;">[PAGE_IMAGE_CAPTION_4]</p>


[H2]<span style="border-left:solid 10px #c3d700; padding-left:10px;">若手のアイデア生かして[/H2]
あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ
あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

<div style="display:block; margin:0 auto;text-align:center;">[PAGE_IMAGE_TAG_5]</div>
<p style="font-size:small;font-weight:bold;color:#80bf05;margin:0 auto;text-align:center;">[PAGE_IMAGE_CAPTION_5]</p>

<a href="http://ja-yokohama.jp/" target="_blank">[PAGE_IMAGE_TAG_1]</a>

---------------------------先方が作ったサンプルテキスト-------------------


これだと、テキストエディタですと
正常に取得できるんです。
PHPでも正常に取得できます。

ですが。
scalaさんは

    headParsedText = headParsedText.replaceAll("<(\"[^\"]*\"|'[^']*'|[^'\">])*>", "")
を実行後の
headParsedTextの中身がこちら

---------------------------実行後-------------------


[PAGE_IMAGE_TAG_2]

episode 06

[H2]地産地消を積極的にＰＲ[/H2]
あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

[PAGE_IMAGE_TAG_3]
[PAGE_IMAGE_CAPTION_3]

あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

[PAGE_IMAGE_TAG_4]
[PAGE_IMAGE_CAPTION_4]


[H2]若手のアイデア生かして[/H2]
あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ
あいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそあいうえおかきくけこさしすせそ

[PAGE_IMAGE_TAG_5]
[PAGE_IMAGE_CAPTION_5]

[PAGE_IMAGE_TAG_1]
【ほげほげ営業局】



---------------------------実行後-------------------
    headParsedText = headParsedText.replaceAll("""\[.*\]""", "")


これを実行したあとがこちら

---------------------------こちら-------------------
【ほげほげ営業局】
---------------------------こちら-------------------


どうしたらいいのw
